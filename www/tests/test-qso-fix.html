<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QSOæ˜Ÿæ˜Ÿç»Ÿè®¡ä¿®å¤éªŒè¯</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #eee;
        }
        h1 {
            text-align: center;
            color: #e94560;
            margin-bottom: 40px;
        }
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        .test-card {
            background: rgba(22, 33, 62, 0.8);
            border-radius: 12px;
            padding: 25px;
            border: 2px solid #0f3460;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .test-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(233, 69, 96, 0.3);
            border-color: #e94560;
        }
        .test-title {
            font-size: 1.4em;
            font-weight: bold;
            margin-bottom: 15px;
            color: #4ade80;
        }
        .test-status {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85em;
            margin-left: 10px;
        }
        .status-pass {
            background: rgba(74, 222, 128, 0.2);
            color: #4ade80;
        }
        .status-fail {
            background: rgba(248, 113, 113, 0.2);
            color: #f87171;
        }
        .status-pending {
            background: rgba(251, 191, 36, 0.2);
            color: #fbbf24;
        }
        .code-block {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            overflow-x: auto;
        }
        .flow-diagram {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            line-height: 2;
            font-size: 0.9em;
        }
        .highlight {
            color: #e94560;
            font-weight: bold;
        }
        .success {
            color: #4ade80;
        }
        .info {
            color: #60a5fa;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #0f3460;
        }
        th {
            background: rgba(233, 69, 96, 0.2);
            color: #e94560;
            font-weight: bold;
        }
        tr:hover {
            background: rgba(233, 69, 96, 0.1);
        }
        .badge-demo {
            display: flex;
            align-items: center;
            gap: 15px;
            margin: 20px 0;
            padding: 15px;
            background: rgba(233, 69, 96, 0.1);
            border-radius: 8px;
        }
        .badge {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            border: 1px solid #0f3460;
        }
        .badge-icon {
            width: 14px;
            height: 14px;
        }
        .badge-count {
            font-size: 1.2em;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>ğŸŒŸ QSOæ˜Ÿæ˜Ÿç»Ÿè®¡ä¿®å¤éªŒè¯</h1>

    <div class="test-grid">
        <div class="test-card">
            <div class="test-title">
                åŠŸèƒ½æµ‹è¯•
                <span class="test-status status-pass">âœ“ å·²å®ç°</span>
            </div>
            <ul style="line-height: 2;">
                <li>âœ… å¾ªç¯è·å–æ‰€æœ‰é¡µé¢ç›´åˆ°æ•°æ®ä¸ºç©º</li>
                <li>âœ… æ¯é¡µ20æ¡è®°å½•</li>
                <li>âœ… æ¯æ¬¡è¯·æ±‚é—´éš”1åˆ†é’Ÿ</li>
                <li>âœ… å®æ—¶æ›´æ–°æ˜Ÿæ˜Ÿæ•°å­—</li>
                <li>âœ… é˜²æ­¢é‡å¤è·å–</li>
            </ul>
        </div>

        <div class="test-card">
            <div class="test-title">
                ä¿®å¤å¯¹æ¯”
                <span class="test-status status-pass">âœ“ å·²å®Œæˆ</span>
            </div>
            <table>
                <thead>
                    <tr>
                        <th>é¡¹ç›®</th>
                        <th>ä¿®å¤å‰</th>
                        <th>ä¿®å¤å</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>è·å–é¡µé¢</strong></td>
                        <td><span class="highlight">åªè·å–page=0</span></td>
                        <td><span class="success">å¾ªç¯è·å–æ‰€æœ‰é¡µé¢</span></td>
                    </tr>
                    <tr>
                        <td><strong>æ˜Ÿæ˜Ÿæ•°å­—</strong></td>
                        <td>æ˜¾ç¤ºå•é¡µæ•°é‡ï¼ˆ20ï¼‰</td>
                        <td>æ˜¾ç¤ºç´¯è®¡æ€»æ•°</td>
                    </tr>
                    <tr>
                        <td><strong>åˆ·æ–°é—´éš”</strong></td>
                        <td>15ç§’</td>
                        <td><span class="success">60ç§’</span></td>
                    </tr>
                    <tr>
                        <td><strong>åœæ­¢æ¡ä»¶</strong></td>
                        <td>æ— æ¡ä»¶</td>
                        <td>æ•°æ®ä¸ºç©ºæˆ–ä¸è¶³20æ¡</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="test-card">
            <div class="test-title">æ¥å£åè®®</div>
            <div class="code-block">
<strong>è¯·æ±‚ï¼š</strong><br>
{<br>
&nbsp;&nbsp;"type": "qso",<br>
&nbsp;&nbsp;"subType": "getList",<br>
&nbsp;&nbsp;"data": {<br>
&nbsp;&nbsp;&nbsp;&nbsp;"page": 0,<br>
&nbsp;&nbsp;&nbsp;&nbsp;"pageSize": 20<br>
&nbsp;&nbsp;}<br>
}<br><br>
<strong>å“åº”ï¼š</strong><br>
{<br>
&nbsp;&nbsp;"type": "qso",<br>
&nbsp;&nbsp;"subType": "getListResponse",<br>
&nbsp;&nbsp;"data": {<br>
&nbsp;&nbsp;&nbsp;&nbsp;"list": [<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"logId": 17,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"timestamp": 1769784362,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"toCallsign": "BH5HSJ",<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"grid": "PM00ad"<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...<br>
&nbsp;&nbsp;&nbsp;&nbsp;]<br>
&nbsp;&nbsp;}<br>
}
            </div>
        </div>

        <div class="test-card">
            <div class="test-title">è·å–æµç¨‹</div>
            <div class="flow-diagram">
                1. å¼€å§‹å…¨é‡è·å–<br>
                &nbsp;&nbsp;â†“<br>
                2. å‘é€ page=0 è¯·æ±‚<br>
                &nbsp;&nbsp;â†“<br>
                3. æ¥æ”¶å“åº”ï¼Œç´¯åŠ æ€»æ•° <span class="success">(+20)</span><br>
                &nbsp;&nbsp;â†“<br>
                4. åˆ¤æ–­ï¼šæ•°æ®ä¸ºç©ºï¼Ÿ<br>
                &nbsp;&nbsp;&nbsp;&nbsp;â”œâ”€ <span class="success">æ˜¯</span> â†’ åœæ­¢ï¼Œæ˜¾ç¤ºæœ€ç»ˆæ€»æ•°<br>
                &nbsp;&nbsp;&nbsp;&nbsp;â””â”€ <span class="highlight">å¦</span> â†’ ç»§ç»­ä¸‹ä¸€æ­¥<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;â†“<br>
                5. ç­‰å¾…60ç§’<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;â†“<br>
                6. page++ï¼Œå‘é€ä¸‹ä¸€é¡µè¯·æ±‚<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;â†“<br>
                7. è¿”å›æ­¥éª¤3ï¼ˆå¾ªç¯ï¼‰<br>
            </div>
        </div>
    </div>

    <div class="test-card" style="grid-column: 1 / -1;">
        <div class="test-title">
            UIæ•ˆæœå±•ç¤º
            <span class="test-status status-pass">âœ“ å·²ä¼˜åŒ–</span>
        </div>
        <div class="badge-demo">
            <div style="font-size: 0.9em; color: #888;">æ˜Ÿæ˜Ÿå¾½ç« æ•ˆæœï¼š</div>
            <div class="badge">
                <svg class="badge-icon" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2">
                    <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                </svg>
                <span class="badge-count" id="demo-count">0</span>
            </div>
            <div style="font-size: 0.9em; color: #888;">
                å®æ—¶æ˜¾ç¤ºï¼šå·²é€šè” QSO æ•°é‡
            </div>
        </div>
        <div class="code-block" style="margin-top: 20px;">
<strong>ä»£ç å®ç°ï¼š</strong><br>
<br>
<span class="info">// è·å–ç¬¬ä¸€é¡µæ˜¾ç¤ºåˆ—è¡¨</span><br>
fetchData(true, true);<br>
<br>
<span class="info">// è‡ªåŠ¨åˆ·æ–°ï¼Œæ¯60ç§’ä¸€æ¬¡</span><br>
setInterval(() => {<br>
&nbsp;&nbsp;fetchAllQsoPages();<br>
}, 60000);<br>
<br>
<span class="info">// å¾ªç¯è·å–ï¼Œç´¯åŠ æ€»æ•°</span><br>
totalQsoCount += list.length;<br>
updateCount(totalQsoCount);
            </div>
    </div>

    <div class="test-card" style="grid-column: 1 / -1;">
        <div class="test-title">æ–°å¢å±æ€§</div>
        <div class="code-block">
<strong>æ„é€ å‡½æ•°ä¸­æ–°å¢ï¼š</strong><br>
<br>
<span class="info">// åˆ†é¡µè·å–ç›¸å…³å±æ€§</span><br>
this.totalQsoCount = 0;      <span class="success">// ç´¯è®¡æ€»æ•°</span><br>
this.currentPage = 0;           <span class="success">// å½“å‰é¡µç </span><br>
this.isFetchingAll = false;     <span class="success">// æ˜¯å¦æ­£åœ¨å…¨é‡è·å–</span><br>
this.qsoList = [];            <span class="success">// ç¼“å­˜æ‰€æœ‰QSOè®°å½•</span><br>
<br>
<strong>æ–°å¢æ–¹æ³•ï¼š</strong><br>
<br>
<span class="info">// å¾ªç¯è·å–æ‰€æœ‰é¡µé¢</span><br>
async fetchAllQsoPages() {<br>
&nbsp;&nbsp;// å®ç°å¾ªç¯è·å–é€»è¾‘<br>
&nbsp;&nbsp;// æ¯é¡µé—´éš”60ç§’<br>
&nbsp;&nbsp;// ç›´åˆ°æ•°æ®ä¸ºç©º<br>
}
        </div>
    </div>

    <div class="test-card" style="grid-column: 1 / -1;">
        <div class="test-title">é¢„æœŸæ•ˆæœ</div>
        <div class="flow-diagram">
<strong>åœºæ™¯ï¼šå‡è®¾æœ‰50æ¡QSOè®°å½•</strong><br><br>
<span class="highlight">ä¿®å¤å‰ï¼š</span><br>
è¿æ¥ â†’ è·å–page 0 â†’ æ˜Ÿæ˜Ÿæ˜¾ç¤º20<br>
åˆ·æ–° â†’ è·å–page 0 â†’ æ˜Ÿæ˜Ÿæ˜¾ç¤º20<br>
ï¼ˆæ€»æ•°å§‹ç»ˆåªæœ‰20ï¼Œä¸å‡†ç¡®ï¼‰<br><br>
<span class="success">ä¿®å¤åï¼š</span><br>
è¿æ¥ â†’ è·å–page 0 â†’ æ˜Ÿæ˜Ÿæ˜¾ç¤º20<br>
      â†’ ç­‰å¾…60ç§’<br>
      â†’ è·å–page 1 â†’ æ˜Ÿæ˜Ÿæ˜¾ç¤º40<br>
      â†’ ç­‰å¾…60ç§’<br>
      â†’ è·å–page 2 â†’ æ˜Ÿæ˜Ÿæ˜¾ç¤º50<br>
      â†’ åœæ­¢ï¼ˆåªæœ‰10æ¡ï¼‰<br>
      â†’ æ˜Ÿæ˜Ÿæœ€ç»ˆæ˜¾ç¤º50ï¼ˆæ€»æ•°å‡†ç¡®ï¼‰âœ“
        </div>
    </div>

    <div class="test-card" style="grid-column: 1 / -1;">
        <div class="test-title">æ§åˆ¶å°æ—¥å¿—</div>
        <div class="code-block">
<span class="info">ä¾¿äºè°ƒè¯•çš„æ—¥å¿—è¾“å‡ºï¼š</span><br>
<br>
[QsoManager] Starting to fetch all QSO pages...<br>
[QsoManager] Fetching QSO page 0...<br>
[QsoManager] Page 0 returned 20 records<br>
[QsoManager] Will fetch next page in 60 seconds...<br>
[QsoManager] Fetching QSO page 1...<br>
[QsoManager] Page 1 returned 20 records<br>
[QsoManager] Fetching QSO page 2...<br>
[QsoManager] Page 2 returned 10 records<br>
[QsoManager] Fetch completed. Total: 50
        </div>
    </div>

    <div style="text-align: center; margin-top: 40px; color: #888; font-size: 0.9em;">
        <p><strong>âœ… ä¿®å¤å·²å®Œæˆï¼</strong></p>
        <p>æ˜Ÿæ˜Ÿæ•°å­—ç°åœ¨ä¼šå‡†ç¡®æ˜¾ç¤ºQSOæ€»æ•°</p>
        <p>ä¿®æ”¹æ–‡ä»¶ï¼š<code>js/ui/ui.js</code> - QsoManagerç±»</p>
    </div>

    <script>
        // æ¼”ç¤ºæ˜Ÿæ˜Ÿæ•°å­—æ›´æ–°æ•ˆæœ
        let count = 0;
        const targetCount = 50;
        const countEl = document.getElementById('demo-count');

        const updateDemo = () => {
            if (count >= targetCount) return;

            count += 20;
            if (count > targetCount) count = targetCount;

            countEl.textContent = count;
            countEl.style.color = count === targetCount ? '#4ade80' : '#60a5fa';

            if (count < targetCount) {
                setTimeout(updateDemo, 2000); // æ¼”ç¤º2ç§’æ›´æ–°ä¸€æ¬¡
            } else {
                setTimeout(() => {
                    countEl.textContent = 'âœ“';
                    countEl.style.color = '#4ade80';
                }, 1000);
            }
        };

        setTimeout(updateDemo, 1000);
    </script>
</body>
</html>
